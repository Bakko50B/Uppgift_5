<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: themeswitcher.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: themeswitcher.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
/* JS-fil för hanteringa av temabyte */

/**
 * Växlar tema mellan mörkt och ljust läge.
 * @file Hanterar temabyte.
 */

const themeToggle = document.getElementById("theme-toggle");
const currentTheme = localStorage.getItem("theme");

  // Sätt temat vid sidladdning
if (currentTheme) {
  //sätter attributet "data-theme" på html (dokumentet) i Dom
  document.documentElement.setAttribute("data-theme", currentTheme);
}

// Växla tema vid klick med händelshanterare på knappen
themeToggle.addEventListener("click", () => {
  //Kontrollerar och sätter värde på attributet "data-theme"
  //Om det aktuella temat är "dark", kommer myThemeEl att sättas till "light".
  //Om det aktuella temat inte är "dark", kommer myThemeEl att sättas till "dark".
  //Ternär operation
  const myThemeEl = document.documentElement.getAttribute("data-theme") === "dark" ? "light" : "dark";
  document.documentElement.setAttribute("data-theme", myThemeEl);
  localStorage.setItem("theme", myThemeEl);
});

// Om inte Locastoreage innehåller currentTheme så tar sidan systeminställningen första gången (innan sparandet)
if (!currentTheme) {
  // använder matchMedia för att kontrollera om användarens systeminställningar föredrar ett mörkt tema.
  const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  //Sätter attributet data-theme till dark eller light beroende på systeminställingarna (om inte LocalStorage har satt variabeln)
  document.documentElement.setAttribute("data-theme", prefersDark ? "dark" : "light");
}

/**
 * Lyssnar på temabyte från användaren om den ändrar via systemet eller webbläsaren
 * och sätter det nya temat (ljust/mörk)
 * samt sparar valet till LocalStorage
 * 
 * Vidareutvecklinga v kod som Malin Larsson tipsade om.
 */
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
  const newTheme = e.matches ? 'dark' : 'light';
  // Uppdaterar data-theme attributet för att ändra temat
  document.documentElement.setAttribute("data-theme", newTheme);
  // Spara det nya temat i localStorage
  localStorage.setItem("theme", currentTheme);
});

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#MyDateEl">MyDateEl</a></li><li><a href="global.html#addMarker">addMarker</a></li><li><a href="global.html#applicants">applicants</a></li><li><a href="global.html#chartInstance">chartInstance</a></li><li><a href="global.html#createPieChart">createPieChart</a></li><li><a href="global.html#createStapleChart">createStapleChart</a></li><li><a href="global.html#ctx">ctx</a></li><li><a href="global.html#fullDate">fullDate</a></li><li><a href="global.html#getFontSize">getFontSize</a></li><li><a href="global.html#getGPSPos">getGPSPos</a></li><li><a href="global.html#getInfo">getInfo</a></li><li><a href="global.html#map">map</a></li><li><a href="global.html#marker">marker</a></li><li><a href="global.html#piechartInstance">piechartInstance</a></li><li><a href="global.html#searchLocation">searchLocation</a></li><li><a href="global.html#sortByApplicants">sortByApplicants</a></li><li><a href="global.html#toggleMenu">toggleMenu</a></li><li><a href="global.html#top5Programs">top5Programs</a></li><li><a href="global.html#top6Courses">top6Courses</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Mar 05 2025 10:08:16 GMT+0100 (centraleuropeisk normaltid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
